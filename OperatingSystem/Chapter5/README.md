# Table of Contents

* [1 常规存储器](#1-常规存储器)
  * [1.1 特征](#11-特征)
  * [1.2 局部性原理](#12-局部性原理)
* [2 虚拟存储器](#2-虚拟存储器)
  * [2.1 定义](#21-定义)
  * [2.2 特征](#22-特征)
  * [2.3 实现方法](#23-实现方法)
  * [2.4 请求分页存储管理与请求分段存储管理](#24-请求分页存储管理与请求分段存储管理)
    * [2.4.1 请求分页存储管理](#241-请求分页存储管理)
    * [2.4.2 请求分段存储管理](#242-请求分段存储管理)
* [3 页面置换算法](#3-页面置换算法)
  * [3.1 最佳置换算法](#31-最佳置换算法)
  * [3.2 先进先出置换算法](#32-先进先出置换算法)
  * [3.3 最近最久未使用置换算法](#33-最近最久未使用置换算法)
  * [3.4 最少使用占用算法](#34-最少使用占用算法)
  * [3.5 `Clock`置换算法](#35-clock置换算法)
  * [3.6 页面缓冲算法](#36-页面缓冲算法)


﻿
# 1 常规存储器
## 1.1 特征
- 一次性：作业在运行前必须一次性地全部装入内存
- 驻留性：作业装入内存后，便一直驻留在内存中，直至作业运行结束

## 1.2 局部性原理
指的是程序在执行时将呈现出局部性规律，即在一较短时间内，程序的执行仅局限与某个部分。表现在以下两个方面：

- 时间局限性：如果程序中的某条指令一旦执行，则不久后该指令可能再次执行，如果某个数据被访问，则不久后该数据可能再次被访问
- 空间局限性：一旦程序访问了某个存储单元，不久以后，附近的存储单元也将被访问


# 2 虚拟存储器
## 2.1 定义
具有请求调入功能和置换功能，能从逻辑上对内存容量加以扩充的一种存储器系统。
## 2.2 特征
- 多次性：将一个作业分成多次调入内存
- 对换性：作业运行期间允许将那些暂不使用的程序或数据从内存调至对换区，需要时再调入内存
- 虚拟性：对内存的扩充是逻辑上的而不是物理上的


## 2.3 实现方法
实现方法主要有两种：

- 分页请求系统
- 请求分段系统
## 2.4 请求分页存储管理与请求分段存储管理
### 2.4.1 请求分页存储管理
请求分页系统采用与基本分页系统相同的方式，提供了请求页表机制，每个页表项包括：

- 页号：与分页系统一致
- 物理块号：与分页系统一致
- 状态位：用于指示该页是否装入内存
- 访问字段：用于记录本页在最近一段时间内被访问的次数或最近已有多长时间未被访问
- 修改位：表示该页在调入内存后是否被修改
- 外存地址：用于该页在外存上的地址

在其中又有三种内存分配策略与置换策略的组合：

- 固定分配局部置换策略：分配固定物理块，换出时换出自己的内存块
- 可变分配全局置换策略：系统为每个进程分配一定数目的物理块，缺页时为其再分配一个物理块并装入缺页，若没有空闲物理块则从内存中选择一页换出
- 可变分配局部置换策略：系统为每个进程分配一定数目的物理块，发生缺页自己将某个内存页换出。若频繁发生缺页则增加物理块，若缺页率低则在对缺页率影响不大的情况下减少物理块
### 2.4.2 请求分段存储管理
请求分段的基本原理和请求分页类似，段表也需要增加状态位、访问字段、修改位以及外存地址等，含义与请求分页系统中相同。为了实现分段共享需要在系统中配置一张共享段表，每个共享段都在共享段表中占一表项，共享段表项记录了共享段的具体信息，比如段名、段长、内存地址等。

# 3 页面置换算法
## 3.1 最佳置换算法
也叫`OPT`置换算法，选择以后不再使用或在最长时间内不再被访问的内存页面予以淘汰，可保证获得最低的缺页率。
## 3.2 先进先出置换算法
也叫`FIFO`置换算法，总是选择最先进入内存的页面予以淘汰，实现简单。
## 3.3 最近最久未使用置换算法
也叫`LRU`置换算法，赋予每个页面一个访问字段，用来记录相应页面自上次被访问依赖所经历的时间`t`，淘汰一个页面时，选择所有页面中其`t`值最大的页面，也就是内存中最近一段时间内最长时间未被访问的页面。
## 3.4 最少使用置换算法
也叫`LFU`置换算法，选择最近一段时间内内存中访问次数最少的页面进行淘汰。
## 3.5 `Clock`置换算法
一种常用的近似`LRU`的算法，为每个页设置一位访问位，再将内存中的所有页面通过链接指针链成一个循环队列。某页被访问时，访问位置1，从替换指针指向下一个页面，若访问位为1，将它置0，并继续向下查找。又叫`NRU`算法。
## 3.6 页面缓冲算法
被换出的页面仍留在内存的空闲块中，所有的空闲块形成一个空闲页面缓冲池，发生缺页时，先从缓冲池中查找，否则为缺页分配一个空闲块并将缺页读入其中。
