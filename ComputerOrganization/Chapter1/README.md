# 1 计算机发展历程
- 通用电子计算机ENIAC诞生
- 第一代计算机：**电子管**计算机
- 第二代计算机：**晶体管**计算机
- 第三代计算机：**集成电路**计算机
- 第四代计算机：**超大规模集成电路**计算机

# 2 计算机基本组成
## 2.1 冯诺依曼结构特征
- 工作方式：**存储程序**
- 基本部件：**运算器、控制器、存储器、输入设备、输出设备**
- 存储器存放**数据+指令**
- 控制器控制指令自动执行
- 运算器能加减乘除基本运算
- 二进制形式存储指令和数据
- 指令由操作码以及地址码两部分组成，操作码指出操作类型，地址码指出操作数地址


## 2.2 硬件
硬件主要包括：

- 中央处理器
- 存储器
- `I/O`控制器
- 外部设备
- 各类总线

### 2.2.1 中央处理器
`Central Processing Unit,CPU`，整个计算机的核心，用于指令的执行，包含两种基本部件：

- 数据通路
- 控制器

#### 2.2.1.1 数据通路

数据通路主要包含：

- 算术逻辑部件
- 通用寄存器

功能：

- 算术运算
- 逻辑运算

#### 2.2.1.2 控制器 
- 对指令进行译码
- 生成相应控制信号
- 控制数据通路进行正确操作

### 2.2.2 存储器
分为：

- 内存
- 外存

内存包括主存储器和高速缓存。外存包括辅助存储器和海量后备存储器。


### 2.2.3 外设
外部设备简称外设，也叫`I/O`设备，外设通常由机械部分和电子部分组成：

- 机械部分：外部设备本身
- 电子部分：控制外设的`I/O`控制器或`I/O`适配器

外设通过`I/O`控制器或`I/O`适配器连接到主机上，`I/O`控制器或`I/O`适配器统称为设备控制器，比如显示控制器（简称显卡）、网络控制器（简称网卡）等。

### 2.2.4 总线
总线是传输信息的介质，用于在部件之间传输信息，`CPU`、主存和`I/O`模块通过总线互连，在`CPU`和`I/O`模块中都内含相应的存储部件，即缓存器。

## 2.3 软件
一般将软件分为两类：

- 系统软件
- 应用软件


# 3 `ISA`
**`ISA`，`Instruction Set Architecture`，指令集体系结构，简称体系结构或系统结构，是软件和硬件之间接口的一个完整定义。`ISA`定义了一台计算机可以执行的所有指令的集合，每条指令规定了计算机执行什么操作，所处理的操作数存放的地址空间以及操作类型。**`ISA`规定的内容包括：

- 数据类型
- 数据格式
- 指令格式
- `I/O`空间的编址方式
- 中断结构
- 机器工作状态的定义和切换
- 输入/输出结构
- 输出/输出数据传送方式
- 存储保护方式

等等。

# 4 可执行文件的执行
## 4.1 `C`语言的编译过程
- 预处理阶段：对`#`开头的文件进行处理，输出一个`.i`为扩展名的文件
- 编译阶段：对预处理后的文件进行编译，生成一个汇编语言程序文件，以`.s`为扩展名
- 汇编阶段：对汇编文件进行汇编，生成一个可重定位目标文件，以`.o`为扩展名，是一个二进制文件
- 链接阶段：将多个可重定向目标文件进行和标准库函数合并称为一个可执行文件


## 4.2 可执行文件的执行过程
以命令：
```bash
./hello
```
为例，步骤如下：

- `shell`将用户输出读取到`CPU`寄存器中
- 接着保存到主存储器中，在主存缓冲区形成`./hello`
- 接收`Enter`后，调出内核中相应服务例程，由内核加载磁盘中可执行文件到存储器
- 内核加载完后，将可执行文件第一条指定的地址送到程序计数器（`Program Counter`，`PC`）中
- `CPU`将`PC`内容作为要执行的指令地址，执行可执行文件
- `CPU`寄存器将输出送到显示屏

# 5 计算机性能评价
## 5.1 定义
- 吞吐率：在单位时间内所完成的工作量
- 响应时间：也叫执行时间/等待时间，从作业开始到完成所用时间


## 5.2 性能指标
- **时钟频率：也叫主频，常用单位`MHz`，`CPU`内部晶振的频率**
- **时钟周期：主频的倒数，执行一个时钟周期内的指令所需的时间**
- **时钟周期数：时钟周期的个数，比如时钟周期为`1s`，时钟周期数为两个，那么`CPU`执行时间为`2s`**
- **`CPI`：平均每条指令的平均周期个数**
- **`MPIS`：每秒能执行的百万指令条数**


## 5.3 计算公式

```bash
CPU执行时间 
= 程序总时钟周期数 / 主频
= 程序总时钟周期数 * 时钟周期
= (CPI * 程序总指令条数) * 时钟周期
```

```bash
程序总时钟周期数 
= CPI * 程序所含指令条数
= sum(CPI_i * C_i) 
= CPI_1 * C_1 + CPI_2 * C_2 + ... + CPI_n * C_n
(CPI_i表示第i个指令的CPI，C_i表示第i个指令的条数)
```
